<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="node_modules/material-components-web/dist/material-components-web.css">
    <link rel="stylesheet" href="node_modules/@material/toolbar/dist/mdc.toolbar.css">
    <link rel="stylesheet" href="node_modules/@material/card/dist/mdc.card.css">
    <link rel="stylesheet" href="node_modules/@material/button/dist/mdc.button.css">
    <link rel="stylesheet" href="css/pyx-reloaded.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500">
    <script src="//code.jquery.com/jquery-3.2.1.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/list.js/1.5.0/list.min.js"></script>
    <script src="node_modules/material-components-web/dist/material-components-web.js"></script>
    <script src="node_modules/@material/toolbar/dist/mdc.toolbar.js"></script>
    <script src="node_modules/@material/drawer/dist/mdc.drawer.js"></script>
    <script src="js/new_game.js"></script>
    <script src="js/lobbies.js"></script>
</head>

<body id="games-global-container" class="mdc-typography demo-body">
<div class="demo-content">
    <header class="mdc-toolbar mdc-elevation--z4">
        <div class="mdc-toolbar__row">
            <section class="mdc-toolbar__section mdc-toolbar__section--align-start">
                <span class="mdc-toolbar__title catalog-title">PYX Reloaded</span>
            </section>
        </div>
    </header>

    <main>
        <div class="mdc-card">
            <section class="mdc-card__primary">
                <h1 class="mdc-card__title mdc-card__title--large">Choose a Nickname to Start!</h1>
            </section>
            <section class="mdc-card__supporting-text">
                <label class="mdc-text-field" data-mdc-auto-init="MDCTextField" style="width: 75%">
                    <input type="text" class="mdc-text-field__input" id="nickname">
                    <span class="mdc-text-field__label">Enter nickname here</span>
                    <div class="mdc-text-field__bottom-line"></div>
                </label>
            </section>
            <section class="mdc-card__actions">
                <button class="mdc-button mdc-button--compact mdc-card__action"
                        data-mdc-auto-init="MDCRipple"
                        onclick="register(); return false;">Take me to the lobby!!!
                </button>
            </section>
        </div>

        <div class="mdc-card">
            <section class="mdc-card__primary">
                <h2 class="mdc-card__title mdc-card__title--large">About PYX Reloaded</h2>
            </section>
            <section class="mdc-card__supporting-text" style="text-align: justify">
                PYX Reloaded is a fork of the original game overhauled and revamped by <a
                    href="https://github.com/mgagemorgan" target="_blank">@mgagemorgan</a> and
                <a href="https://github.com/devgianlu" target="_blank">@devgianlu</a> on GitHub. The goal of
                this project is to overhaul the entire interface, and revamp the backend so that it works
                out-of-the-box. Eventually, there are goals for social media integration, accounts, chat
                features and administration thereof, and mobile support. @devgianlu has an <a
                    href="https://play.google.com/store/apps/details?id=com.gianlu.pretendyourexyzzy"
                    target="_blank">Android client</a> that works great and is recommended for anyone on
                Android.
            </section>
            <section class="mdc-card__actions">
                <a class="mdc-button mdc-button--compact mdc-card__action"
                   data-mdc-auto-init="MDCRipple"
                   target="_blank"
                   href="https://github.com/devgianlu/PYX-Reloaded/">
                    We're on <img src="./images/octicons/mark-github.svg">&nbsp;<img
                        src="./images/octicons/logo-github.svg"> !!
                </a>
            </section>
        </div>
    </main>
</div>

<script>
    window.mdc.autoInit();

    var drawerEl = document.querySelector('.mdc-persistent-drawer');
    var MDCPersistentDrawer = mdc.drawer.MDCPersistentDrawer;
    var drawer = new MDCPersistentDrawer(drawerEl);
    document.querySelector('.demo-menu').addEventListener('click', function () {
        drawer.open = !drawer.open;
    });
    drawerEl.addEventListener('MDCPersistentDrawer:open', function () {
        console.log('Received MDCPersistentDrawer:open');
    });
    drawerEl.addEventListener('MDCPersistentDrawer:close', function () {
        console.log('Received MDCPersistentDrawer:close');
    });


    window.onload = function () {
        $.post("AjaxServlet?o=fl").fail(function (data) {
            alert("Error data: " + JSON.stringify(data));
        }).done(function (data) {
            console.log(data);

            localStorage['css'] = JSON.stringify(data.css);
            localStorage['dgo'] = JSON.stringify(data.dgo);

            if (data.ip) {
                if (data.next === "game") {
                    window.location = "lobbies.html?gid=" + data.gid;
                } else {
                    window.location = "lobbies.html";
                }
            }
        });
    };

    function register() {
        var nickname = $("input#nickname").val();

        $.post("AjaxServlet?o=r&n=" + nickname).fail(function (data) {
            alert("Error data: " + JSON.stringify(data));
        }).done(function (data) {
            console.log(data);
            window.location = "lobbies.html";
        });
    }
</script>

</body>

</html>
