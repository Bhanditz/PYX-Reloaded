<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="//unpkg.com/material-components-web@0.28.0/dist/material-components-web.min.css">
    <link rel="stylesheet" href="//fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Roboto:300,400,500">
    <link rel="stylesheet" href="css/pyx-reloaded.css">
    <link rel="stylesheet" href="css/cards.css">
    <script src="//cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script>
    <script src="js/theming.js"></script>
    <script>applyCustomTheme();</script>
</head>
<body class="mdc-typography">
<div class="page-content">
    <header class="mdc-toolbar mdc-toolbar--fixed mdc-elevation--z4">
        <div class="mdc-toolbar__row">
            <section class="mdc-toolbar__section mdc-toolbar__section--align-start">
                <button class="material-icons mdc-toolbar__menu-icon">menu</button>
                <span class="mdc-toolbar__title _title">{{Game name}} - PYX Reloaded</span>
            </section>

            <section class="mdc-toolbar__section mdc-toolbar__section--align-end">
                <button class="material-icons align-icons mdc-toolbar__icon" onclick="leaveGame();">close</button>
            </section>
        </div>
    </header>

    <main class="mdc-toolbar-fixed-adjust" style="display: flex; flex-flow: row">
        <div id="blackCard"></div>
        <div id="whiteCards">
            <div class="list"></div>
        </div>
    </main>
</div>

<aside class="bottom-sheet" id="hand">
    <div style="flex-grow: 1"></div>
    <!-- TODO: Clicking this should close everything -->
    <div class="mdc-elevation--z16 mdc-toolbar">
        <div class="mdc-toolbar__row">
            <section class="mdc-toolbar__section mdc-toolbar__section--align-start">
                <span class="mdc-toolbar__title">Hand cards</span>
            </section>
            <section class="mdc-toolbar__section mdc-toolbar__section--align-end">
                <button class="material-icons align-icons mdc-toolbar__icon" onclick="toggleHand(this)">
                    keyboard_arrow_up
                </button>
            </section>
        </div>
    </div>
    <div class="list mdc-theme--background bottom-sheet__content">
    </div>
</aside>

<aside class="mdc-drawer--temporary" id="drawer">
    <nav class="mdc-drawer__drawer" style="padding: 16px;">
        <div style="height: 50%;" id="scoreboard">
            <h3 class="mdc-typography mdc-typography--title">Scoreboard</h3>
            <ul class="mdc-list mdc-list--two-line list" style="overflow-y: auto"></ul>
        </div>
        <div id="chat" style="display: flex; flex-flow:column; height: 50%">
            <h3 class="mdc-typography mdc-typography--title">Chat</h3>
            <div class="list"
                 style="flex-grow: 1; overflow-y: auto; overflow-wrap: break-word; padding-top: 0.25rem"></div>
            <div class="mdc-text-field mdc-text-field--outlined mdc-text-field--with-trailing-icon"
                 data-mdc-auto-init="MDCTextField" style="width: 100%">
                <input type="text" id="chat-message" class="mdc-text-field__input">
                <label for="chat-message" class="mdc-text-field__label">Message</label>
                <i class="material-icons mdc-text-field__icon" tabindex="0"
                   onclick="sendChatMessage(this.parentElement);">send</i>
                <div class="mdc-text-field__outline">
                    <svg>
                        <path class="mdc-text-field__outline-path"></path>
                    </svg>
                </div>
                <div class="mdc-text-field__idle-outline"></div>
            </div>
        </div>
    </nav>
</aside>

<div style="display: none">
    <li id="player-item-template" class="mdc-list-item">
        <span class="mdc-list-item__graphic mdc-typography mdc-typography--display1 _score">{{Score}}</span>
        <span class="mdc-list-item__text">
            <span class="_name">{{Player's name}}</span>
            <span class="mdc-list-item__secondary-text _status">{{Player's status}}</span>
        </span>
    </li>

    <h5 id="chat-msg-template" class=" mdc-typography mdc-typography--adjust-margin mdc-typography--body1">
        <b class="_sender">{{Sender}}</b><span class="_msg">{{Message}}</span>
    </h5>

    <div id="card-template" class="mdc-card pyx-card">
        <section class="mdc-card__supporting-text mdc-typography mdc-typography--body1 _text card-text">
            {{Text}}
        </section>
        <section class="mdc-card__supporting-text card-details">
            <h4 class="mdc-typography mdc-typography--subheading1">Pick
                <div class="circled _pick">?</div>
            </h4>
            <h4 class="mdc-typography mdc-typography--subheading1" style="margin-top: 8px">Draw
                <div class="circled _draw">?</div>
            </h4>
            <h4 class="mdc-typography mdc-typography--subheading1 _watermark"
                style="margin-top: 8px; font-weight: 300;">
                {{Watermark}}
            </h4>
        </section>
    </div>
</div>

<script src="//code.jquery.com/jquery-latest.min.js"></script>
<script src="//unpkg.com/material-components-web@0.28.0/dist/material-components-web.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/list.js/1.5.0/list.min.js"></script>
<script src="//unpkg.com/masonry-layout@4/dist/masonry.pkgd.min.js"></script>
<script src="js/utils.js"></script>
<script src="js/bottom_sheet.js"></script>
<script src="js/polling.js"></script>
<script src="js/game.js"></script>
<script>
    window.mdc.autoInit();

    const hand = new BottomSheet(document.getElementById('hand'));

    function toggleHand(button) {
        if (hand.open) {
            button.innerHTML = "keyboard_arrow_up";
            hand.open = false;
        } else {
            button.innerHTML = "keyboard_arrow_down";
            hand.open = true;
        }
    }
</script>

</body>
</html>
